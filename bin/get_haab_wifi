#!/usr/bin/env bash

random_name() {
    local dune_characters=(
        PaulAtreides
        LetoAtreides
        LadyJessica
        DuncanIdaho
        GurneyHalleck
        ThufirHawat
        VladimirHarkonnen
        FeydRautha
        PiterDeVries
        Stilgar
        Chani
        LietKynes
        Jamis
        Reverend_Mother_Mohiam
        CountFenring
        LadyMargot
        Shaddam_IV
        PrincessIrulan
        Rabban
        Yueh
    )
    local random_index=$((RANDOM % ${#dune_characters[@]}))
    echo "${dune_characters[$random_index]}"
}

random_ticket_number() {
    echo $((9000000000 + RANDOM % 1000000000))
}

fullname=$(random_name)
ticket_number=$(random_ticket_number)

curl -s "https://haabproject.com/thank-you-cafe-wifi/?fullname=$fullname&email=nebaronharko@gmail.com&ticketnumber=$ticket_number" -o response.html

echo "[wifi code]: $(grep "Wifi Code:" response.html | sed 's/.*Wifi Code: \([0-9]*\).*/\1/')"

rm response.html
