#!/bin/bash

CYAN='\033[0;36m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${YELLOW}PORT    PID     PROCESS${NC}"
echo -e "${YELLOW}━━━━━━━━━━━━━━━━━━━━━━━${NC}"

lsof -iTCP -sTCP:LISTEN -P -n 2>/dev/null | awk 'NR>1 {print $9, $2, $1}' | \
  sed 's/*://' | sed 's/->.*//' | \
  sort -n -t: -k2 | \
  awk '{
    split($1, a, ":");
    port = a[length(a)];
    printf "\033[0;36m%-7s\033[0m \033[0;32m%-7s\033[0m %s\n", port, $2, $3
  }'
